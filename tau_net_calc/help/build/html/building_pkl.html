

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4. Building the Accessibility dictionary (pkl) &mdash; Introduction to QGIS plugin &#34;Accessibility calculations&#34;</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="_static/app.png"/>
      <script src="_static/documentation_options.js?v=4c4d3c97"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="5. Public Transport: Accessibility AREA, fixed start or arrival time" href="raptor_area.html" />
    <link rel="prev" title="3. Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Introduction to QGIS plugin "Accessibility calculations"
          </a>
              <div class="version">
                1.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="welcome.html">1. Workshop Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">2. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">3. Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Building the Accessibility dictionary (<span class="xref std std-term">pkl</span>)</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-pkl-dictionary-is-build-in-several-steps">4.1. The <span class="xref std std-term">pkl</span> dictionary is build in several steps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#an-example-constructing-dictionary-for-the-town-of-eilat">4.2. An example - Constructing dictionary for the town of Eilat</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="raptor_area.html">5. Public Transport: Accessibility AREA, fixed start or arrival time</a></li>
<li class="toctree-l1"><a class="reference internal" href="raptor_map.html">6. Public transport: Accessibility MAP, fixed start/arrival time</a></li>
<li class="toctree-l1"><a class="reference internal" href="timetable_mode.html">7. PT accessibility for the travelers whose decision to start depends on the PT timetable</a></li>
<li class="toctree-l1"><a class="reference internal" href="car_accessibility.html">8. Сar accessibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="relative_ready-made.html">9. Compare accessibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">10. Visualization of accessibility computations</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample.html">11. Example of accessibility computations for the Gesher theater, Yafo</a></li>
<li class="toctree-l1"><a class="reference internal" href="markav.html">12. Appendix A: How to find the catalog number (מקט) of the bus line at the http://markav.net</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">13. Appendix B: Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">14. Appendix C: License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Introduction to QGIS plugin "Accessibility calculations"</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active"><span class="section-number">4. </span>Building the Accessibility dictionary (<span class="xref std std-term">pkl</span>)</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="building-the-accessibility-dictionary-pkl">
<span id="loading-data"></span><h1><span class="section-number">4. </span>Building the Accessibility dictionary (<a class="reference internal" href="glossary.html#term-pkl"><span class="xref std std-term">pkl</span></a>)<a class="headerlink" href="#building-the-accessibility-dictionary-pkl" title="Link to this heading">¶</a></h1>
<p>To data necessary for estimating transit or car accessibility must be organized as a dictionary in a <a class="reference internal" href="glossary.html#term-pkl"><span class="xref std std-term">pkl</span></a> format.
To build a dictinary you need all three datasets that are used by the ACCESSSIBILITY plugin and these datasets must cover the same area.
The accessibility estimates would regard this area only and that is why it is worth to build the dictionary for a large area.
We supply the dictionary for the entire Israel, see how to deploy already constructed dictionary &#64;&#64;&#64;WHERE?.</p>
<div class="line-block">
<div class="line">The <strong>pkl</strong> dictionary is a basis for PT accessibility computation.</div>
</div>
<div class="line-block">
<div class="line">To construct a dictionary</div>
</div>
<ul class="simple">
<li><p>The <a class="reference internal" href="glossary.html#term-GTFS"><span class="xref std std-term">GTFS</span></a> dataset must be download to your PC from, e.g., <a class="reference external" href="https://gtfs.pro/">https://gtfs.pro/</a>. Most of our examples employ the GTFS datasets of Israel for 2018 and 2024.</p></li>
<li><p>The layer of buildings. Most of our examples employ the OSM layers gis_osm_buildings_a_free, for the entire Israel.</p></li>
<li><p>The layer of roads. Most of our examples employ the OSM layers gis_osm_roads_free, for the entire Israel.</p></li>
</ul>
<div class="line-block">
<div class="line">The layers of buildings and roads must be open in the current QGIS project.</div>
</div>
<section id="the-pkl-dictionary-is-build-in-several-steps">
<h2><span class="section-number">4.1. </span>The <a class="reference internal" href="glossary.html#term-pkl"><span class="xref std std-term">pkl</span></a> dictionary is build in several steps<a class="headerlink" href="#the-pkl-dictionary-is-build-in-several-steps" title="Link to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Run ACCESSIBILITY plugin and choose <em>Build pkl dictionary</em> option.</p>
<img alt="_images/mainwindow.png" class="inline border" src="_images/mainwindow.png" />
</li>
<li><p>The dictionary construction dialog is opened.</p>
<img alt="_images/pkl1.png" class="inline border" src="_images/pkl1.png" />
</li>
<li><p>You have to set:</p>
<ul class="simple">
<li><p><span class="guilabel">GTFS folder</span>: the folder of the GTFS dataset. This folder must contain <code class="docutils literal notranslate"><span class="pre">stops.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">stop_times.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">routes.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">trips.txt</span></code>, <code class="docutils literal notranslate"><span class="pre">calendar.txt</span></code> files.</p></li>
<li><p><span class="guilabel">Layer of roads</span>: the road layer, must be opened in a current QGIS project.</p></li>
<li><p><span class="guilabel">Layer of buildings</span>: the layer of buildings, must be opened in a current GIS project.</p></li>
</ul>
</li>
</ol>
<div class="line-block">
<div class="line">and</div>
</div>
<blockquote>
<div><ul class="simple">
<li><p><span class="guilabel">Dictionary folder</span>: the folder to store the dictionary.</p></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Click <strong>Run</strong> to start. The <strong>progressbar</strong> will show the progress of the computations. You can break dictinary construction by pressing <strong>Break</strong>.</p></li>
</ol>
<div class="line-block">
<div class="line">The <strong>Log</strong> tab contains information about the constructed dictionary.</div>
</div>
</section>
<section id="an-example-constructing-dictionary-for-the-town-of-eilat">
<span id="sample-build"></span><h2><span class="section-number">4.2. </span>An example - Constructing dictionary for the town of Eilat<a class="headerlink" href="#an-example-constructing-dictionary-for-the-town-of-eilat" title="Link to this heading">¶</a></h2>
<div class="line-block">
<div class="line">All three datasets are in Eilat.zip file that includes QGIS project Eilat.pqz.</div>
<div class="line">Open Eilat.zip to <strong>eliat</strong> folder and then open the Eilat.pgz project</div>
</div>
<p>See the OSM map of the Eilat city (left) and the area that is covered by the layers of the project</p>
<p>MAKE ZOOM TO EILAT only</p>
<div style="display: flex; justify-content: space-between;">
    <img src="_images/eilat2.png" style="width: 45%; border: 1px solid black;" />
        <img src="_images/eilat1.png" style="width: 45%; border: 1px solid black;" />
</div><div class="line-block">
<div class="line"><br /></div>
<div class="line">Run ACCESSIBILITY plugin and click <em>Build GTFS dictionary (pkl)</em> to open a dialog:</div>
</div>
<img alt="_images/pkl1.png" class="inline border" src="_images/pkl1.png" />
<div class="line-block">
<div class="line">- In the <strong>Source GTFS folder</strong> text box enter the path to the GTFS data set</div>
<div class="line">- In the <strong>Layer of road</strong> text box enter the name of the layer of roads</div>
<div class="line">- In the <strong>Layer of building</strong> text box enter the name of the layer of buildings</div>
<div class="line">- In the <strong>GTFS dictionary</strong> text box enter the name of a folder to store the dictionary.</div>
</div>
<div class="line-block">
<div class="line">After you push <span class="guilabel">Run</span>, the plugin tests the correctness of the datasets and, if the test is passed, constructs the dictionary.</div>
<div class="line">The <strong>Log</strong> tab contains the paths to the <strong>GTFS</strong> и <strong>pkl</strong> folders.</div>
</div>
<img alt="_images/build_finish.png" class="inline border" src="_images/build_finish.png" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="3. Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="raptor_area.html" class="btn btn-neutral float-right" title="5. Public Transport: Accessibility AREA, fixed start or arrival time" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Geosimlab | TLV university.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>