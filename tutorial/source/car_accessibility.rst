.. car_accessibility:

Сar: Forward/backward accessibility AREA/MAP
============================================
Предварительная подготовка
--------------------------
Необходимо предварительно подготовить следующие данные:

- слой дорог
- слой зданий

Слой дорог и слой зданий должны быть загружены в текущий проект QGIS.

Вычисление
----------
#. Открыть плагин и выбрать пункт меню 

Для режима **Forward accessibility AREA (MAP)**

*Car accessibility AREA (MAP) -> Forward accessibility*.

Для режима **Backward accessibility AREA (MAP)**

*Car accessibility AREA (MAP) -> Backward accessibility*.


   .. image:: ./img/mainwindow.png
      :class: inline, border

#. Откроется диалоговое окно настроек параметров.

   .. image:: ./img/car.png
      :class: inline, border

#. В окне настроек необходимо указать следующие параметры:

   - :guilabel:`Output folder`: Выбор папки для вывода протокола работы алгоритма
   - :guilabel:`Layer of road`: Выбор слоя стартовых точек из текущего проекта
   - :guilabel:`Field with speed value`: Выбор в слое поля, содержащего значение скорости
   - :guilabel:`Default speed value`: Значание скорости по умолчанию
   - :guilabel:`Field with direction`: Выбор в слое поля, содержащего значение направления движения
   - :guilabel:`Layer of origins`: Выбор слоя стартовых точек из текущего проекта
   - :guilabel:`Maximal time travel`: Максимальное время поездки

   Для режима MAP необходимо установить дополнительные параметры

   - :guilabel:`Run aggregate`: Включение чекбокса означает, что в отчете необходимо выполнить аггрегирование по выбранному полю
   - :guilabel:`Field to aggregate`: Имя поля для аггрегирования
   - :guilabel:`Time interval between stored maps`: Интервал времени для группирования результатов вычислений
   
   
#. Нажмите кнопку **Run** для запуска алгоритма.

#. В процессе работы алгоритма отображается информация о ходе вычислений на вкладке **Log**, в строке состояния и progressbar.

#. Процесс вычислений можно прервать, нажав на кнопку **Break**.

.. note:: Если выбрано более 10 зданий в слое :guilabel:`buildings` вычисления могут занять много времени. Отображается диалоговое окно c предупреждением.


Структура отчета
----------------

В режиме **Forward AREA**

+---------------------------+------------------+
| Attribute                 | Value            |
+===========================+==================+
| Source_ID                 |                  |
+---------------------------+------------------+
| Destination_ID            |                  |
+---------------------------+------------------+
| accessibility(min)        |                  |
+---------------------------+------------------+

В режиме **Backward AREA**

+---------------------------+------------------+
| Attribute                 | Value            |
+===========================+==================+
| Destination_ID            |                  |
+---------------------------+------------------+
| Source_ID                 |                  |
+---------------------------+------------------+
| accessibility(min)        |                  |
+---------------------------+------------------+

В режиме **Forward/Backward MAP**

+---------------------------+------------------+
| Attribute                 | Value            |
+===========================+==================+
| Source_ID                 |                  |
+---------------------------+------------------+
| Time_interval\ :sub:`n`   |                  |
+---------------------------+------------------+
| Value_aggr\ :sub:`n`      |                  |
+---------------------------+------------------+

Диаграмма потоков данных
------------------------

    .. image:: ./img/flowchart3.jpg
      :class: inline, border